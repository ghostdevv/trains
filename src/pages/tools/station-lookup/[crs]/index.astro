---
import { IconCalendarWait } from 'obra-icons-svelte';
import { getStation } from '$lib/data/stations';
import Global from '$layouts/Global.astro';

const station = getStation(Astro.params.crs!);

if (!station) {
	return Astro.redirect('/tools/live-trains?error=crs-not-found');
}
---

<Global>
	<section>
		<h6>Station Lookup</h6>

		<div class="name-area">
			<h1 class="name">{station.name}</h1>

			<a
				href={`/tools/live-trains/${station.crs}`}
				class="button icon"
				title="Open live times"
			>
				<IconCalendarWait />
			</a>
		</div>
	</section>

	<section>
		<table>
			<thead>
				<tr>
					<th>CRS</th>
					<th>TIPLOC</th>
				</tr>
			</thead>

			<tbody>
				<tr>
					<td>{station.crs}</td>
					<td>{station.tiploc}</td>
				</tr>
			</tbody>
		</table>
	</section>
</Global>

<style>
	.name-area {
		display: flex;
		align-items: center;
		justify-content: space-between;
	}

	.name {
		text-transform: capitalize;
	}
</style>
